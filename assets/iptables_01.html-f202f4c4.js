import{_ as a,W as e,X as s,Y as n}from"./framework-2e6688e7.js";const r={},i=n(`<h2 id="iptables的常用表" tabindex="-1"><a class="header-anchor" href="#iptables的常用表" aria-hidden="true">#</a> iptables的常用表</h2><blockquote><p>表是iptables规则的集合，表中包含了若干个链.</p></blockquote><ul><li>Filter表 (iptables默认表，用来过滤网络包)</li><li>NAT表 （用来做NAT等）</li></ul><h2 id="链" tabindex="-1"><a class="header-anchor" href="#链" aria-hidden="true">#</a> 链</h2><p>以下都是个人粗解。</p><ul><li>INPUT (用在filter表，用来防火墙过滤进入主机防火墙的包)</li><li>OUTPUT （用在filter表和NAT表，用来控制离开主机的数据包）</li><li>PREROUTING</li><li>POSTROUTING</li><li>FORWARD</li></ul><h3 id="prerouting" tabindex="-1"><a class="header-anchor" href="#prerouting" aria-hidden="true">#</a> PREROUTING</h3><p>多用在nat表，PREROUTING链用于处理数据包到达本地主机，一般是目的地址转换DNAT和目的端口转发，不会路由选择（需要Forward链），实现服务器映射和对外发布</p><p>举例：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-A</span> PREROUTING <span class="token parameter variable">-d</span> <span class="token number">203.0</span>.113.10 <span class="token parameter variable">-j</span> DNAT --to-destination <span class="token number">192.168</span>.1.2

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>目的端口转发：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-A</span> PREROUTING <span class="token parameter variable">-p</span> tcp <span class="token parameter variable">--dport</span> <span class="token number">80</span> <span class="token parameter variable">-j</span> DNAT --to-destination <span class="token number">192.168</span>.0.100:80

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="postrouting" tabindex="-1"><a class="header-anchor" href="#postrouting" aria-hidden="true">#</a> POSTROUTING</h3><p>用在nat表，用来做离开主机后的数据包的网络地址转换和端口转发，常和SNAT搭配使用。POSTROUTING链是在数据包离开本地路由器之前进行修改的最后一个机会。因此，使用POSTROUTING链进行SNAT会使源IP地址在发往目的地之前发生变化。这通常是一种将内部站点连接到互联网的常见方法。</p><p>举例：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-A</span> POSTROUTING <span class="token parameter variable">-o</span> eth0 <span class="token parameter variable">-j</span> SNAT --to-source <span class="token operator">&lt;</span>router_public_ip<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="forward链" tabindex="-1"><a class="header-anchor" href="#forward链" aria-hidden="true">#</a> FORWARD链</h3><p>FORWARD链用于处理网络上<strong>流经本机</strong>的数据包，所以适用于将其他网络中的流量转发到其他网络或本地主机上。</p><p>一般做法是允许所有数据包流经本机转发：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-A</span> FORWARD <span class="token parameter variable">-j</span> ACCEPT
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,20),l=[i];function t(p,d){return e(),s("div",null,l)}const c=a(r,[["render",t],["__file","iptables_01.html.vue"]]);export{c as default};
