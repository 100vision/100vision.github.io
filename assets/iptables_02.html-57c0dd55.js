import{_ as a,W as e,X as s,Y as n}from"./framework-2e6688e7.js";const t={},r=n(`<h2 id="iptables的常用命令" tabindex="-1"><a class="header-anchor" href="#iptables的常用命令" aria-hidden="true">#</a> iptables的常用命令</h2><h3 id="_1-查看当前规则。" tabindex="-1"><a class="header-anchor" href="#_1-查看当前规则。" aria-hidden="true">#</a> 1. 查看当前规则。</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-L</span> <span class="token parameter variable">-t</span> <span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span> <span class="token parameter variable">-v</span> --line-numbers
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>表名有: nat,filter,mangle</li></ul><p><strong>举例:查看nat表中的规则</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-L</span> <span class="token parameter variable">-t</span> nat <span class="token parameter variable">-v</span> --line-numbers
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>输出类似：</p><div class="language-plain line-numbers-mode" data-ext="plain"><pre class="language-plain"><code>
Chain POSTROUTING (policy ACCEPT 285 packets, 37567 bytes)
num   pkts bytes target     prot opt in     out     source               destination
1        0     0 MASQUERADE  all  --  any    !docker0  172.17.0.0/16        anywhere
2        0     0 MASQUERADE  all  --  any    !br-2810b48c01b9  172.18.0.0/16        anywhere
3        0     0 MASQUERADE  tcp  --  any    any     172.18.0.4           172.18.0.4           tcp dpt:http
4        0     0 MASQUERADE  tcp  --  any    any     172.18.0.5           172.18.0.5           tcp dpt:mysql
5        4   240 MASQUERADE  all  --  any    eth0    192.0.2.0/24         anywhere
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-添加iptables规则" tabindex="-1"><a class="header-anchor" href="#_2-添加iptables规则" aria-hidden="true">#</a> 2. 添加iptables规则</h3><p>2.1 指定链和表添加规则</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-t</span> <span class="token operator">&lt;</span>表名<span class="token operator">&gt;</span> <span class="token parameter variable">-A</span> <span class="token operator">&lt;</span>链名<span class="token operator">&gt;</span> <span class="token parameter variable">-d</span> <span class="token operator">&lt;</span>目标网络/主机<span class="token operator">&gt;</span> <span class="token parameter variable">-s</span> <span class="token operator">&lt;</span>源<span class="token operator">&gt;</span> <span class="token parameter variable">-j</span> <span class="token operator">&lt;</span>动作<span class="token operator">&gt;</span> <span class="token parameter variable">-i</span> <span class="token operator">&lt;</span>网络接口名<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>举例：添加POSTROUTING链的1条规则实现源地址转换</strong>：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>iptables -t nat -A POSTROUTING -s 192.168.1.0/24 -i eth0 -j MASQUERADE
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_3-删除iptables规则" tabindex="-1"><a class="header-anchor" href="#_3-删除iptables规则" aria-hidden="true">#</a> 3. 删除iptables规则</h3><div class="hint-container tip"><p class="hint-container-title">定位规则编号</p><p>iptables -L --line-nubmers</p></div><p>3.1 指定链，规则号删除</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>iptables <span class="token parameter variable">-D</span> <span class="token operator">&lt;</span>链名<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>n<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>举例：删除POSTROUTING链的1号规则</strong>：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>iptables -D POSTROUTING 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="未完待续" tabindex="-1"><a class="header-anchor" href="#未完待续" aria-hidden="true">#</a> 未完待续</h3>`,20),l=[r];function i(p,d){return e(),s("div",null,l)}const c=a(t,[["render",i],["__file","iptables_02.html.vue"]]);export{c as default};
