import{_ as s,W as t,X as l,Z as a,$ as o,a0 as c,Y as n,G as i}from"./framework-2e6688e7.js";const r={},p=n(`<h2 id="_1、清理客户端策略缓存。" tabindex="-1"><a class="header-anchor" href="#_1、清理客户端策略缓存。" aria-hidden="true">#</a> 1、清理客户端策略缓存。</h2><blockquote><p>清理客户端策略，让策略重新下载。</p></blockquote><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code><span class="token function">Invoke-WmiMethod</span> <span class="token operator">-</span>ComputerName &lt;remote_computer&gt; <span class="token operator">-</span>Namespace root\\ccm <span class="token operator">-</span><span class="token keyword">Class</span> sms_client <span class="token operator">-</span>Name ResetPolicy <span class="token operator">-</span>ArgumentList @<span class="token punctuation">(</span>1<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后检查<code>policyAgent.log</code>日志。并查看计算机策略是已被清除：</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Get-WmiObject -Namespace root\\ccm\\dcm -Class SMS_DesiredConfiguration
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果已清除，以上结果是空的。</p><h2 id="_2、远程触发客户端动作" tabindex="-1"><a class="header-anchor" href="#_2、远程触发客户端动作" aria-hidden="true">#</a> 2、远程触发客户端动作</h2><blockquote><p>实现/远程手动远程触发SCCM客户端行为，不必等待策略执行间隔，例如：</p></blockquote><h3 id="命令行" tabindex="-1"><a class="header-anchor" href="#命令行" aria-hidden="true">#</a> 命令行</h3>`,9),d=a("table",null,[a("thead",null,[a("tr",null,[a("th",null,"Client Agent Trigger Schedule ID"),a("th",null,"Client Action Name")])]),a("tbody",null,[a("tr",null,[a("td",null,'"{00000000-0000-0000-0000-000000000021}"'),a("td",null,"Machine policy retrieval & Evaluation Cycle")]),a("tr",null,[a("td",{"00000000-0000-0000-0000-000000000022":""}),a("td",null,"Machine policy evaluation cycle")]),a("tr",null,[a("td",{"00000000-0000-0000-0000-000000000003":""}),a("td",null,"Discovery Data Collection Cycle")]),a("tr",null,[a("td",{"00000000-0000-0000-0000-000000000002":""}),a("td",null,"Software inventory cycle")]),a("tr",null,[a("td",{"00000000-0000-0000-0000-000000000001":""}),a("td",null,"Hardware inventory cycle")]),a("tr",null,[a("td",{"00000000-0000-0000-0000-000000000113":""}),a("td",null,"Software updates scan cycle")]),a("tr",null,[a("td",{"00000000-0000-0000-0000-000000000114":""}),a("td",null,"Software updates deployment evaluation cycle")]),a("tr",null,[a("td",{"00000000-0000-0000-0000-000000000031":""}),a("td",null,"Software metering usage report cycle")]),a("tr",null,[a("td",{"00000000-0000-0000-0000-000000000121":""}),a("td",null,"Application deployment evaluation cycle")]),a("tr",null,[a("td",{"00000000-0000-0000-0000-000000000026":""}),a("td",null,"User policy retrieval")]),a("tr",null,[a("td",{"00000000-0000-0000-0000-000000000027":""}),a("td",null,"User policy evaluation cycle")]),a("tr",null,[a("td",{"00000000-0000-0000-0000-000000000032":""}),a("td",null,"Windows installer source list update cycle")]),a("tr",null,[a("td",{"00000000-0000-0000-0000-000000000010":""}),a("td",null,"File collection")])])],-1),u=n(`<h3 id="举例-启动触发" tabindex="-1"><a class="header-anchor" href="#举例-启动触发" aria-hidden="true">#</a> 举例：启动触发</h3><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code>WMIC <span class="token operator">/</span>namespace:\\\\root\\ccm path sms_client CALL TriggerSchedule <span class="token string">&quot;{00000000-0000-0000-0000-000000000002}&quot;</span> <span class="token operator">/</span>NOINTERACTIVE 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="_3-快速启动客户端基线评估" tabindex="-1"><a class="header-anchor" href="#_3-快速启动客户端基线评估" aria-hidden="true">#</a> 3. 快速启动客户端基线评估</h2><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code>
 <span class="token variable">$Baselines</span> = <span class="token function">Get-WmiObject</span> <span class="token operator">-</span>ComputerName <span class="token variable">$ComputerName</span> <span class="token operator">-</span>Namespace root\\ccm\\dcm <span class="token operator">-</span><span class="token keyword">Class</span> SMS_DesiredConfiguration
<span class="token punctuation">}</span>
 <span class="token keyword">Else</span>
<span class="token punctuation">{</span>
 <span class="token variable">$Baselines</span> = <span class="token function">Get-WmiObject</span> <span class="token operator">-</span>ComputerName <span class="token variable">$ComputerName</span> <span class="token operator">-</span>Namespace root\\ccm\\dcm <span class="token operator">-</span><span class="token keyword">Class</span> SMS_DesiredConfiguration <span class="token punctuation">|</span> <span class="token function">Where-Object</span> <span class="token punctuation">{</span><span class="token variable">$_</span><span class="token punctuation">.</span>DisplayName <span class="token operator">-like</span> <span class="token variable">$BLName</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 
<span class="token variable">$Baselines</span> <span class="token punctuation">|</span> <span class="token operator">%</span> <span class="token punctuation">{</span>
 
 <span class="token punctuation">(</span><span class="token namespace">[wmiclass]</span><span class="token string">&quot;\\\\<span class="token variable">$ComputerName</span>\\root\\ccm\\dcm:SMS_DesiredConfiguration&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>TriggerEvaluation<span class="token punctuation">(</span><span class="token variable">$_</span><span class="token punctuation">.</span>Name<span class="token punctuation">,</span> <span class="token variable">$_</span><span class="token punctuation">.</span>Version<span class="token punctuation">)</span> 

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考" aria-hidden="true">#</a> 参考</h2>`,5),m={href:"https://www.manishbangia.com/initiate-sccm-client-actions-cmd-line/",target:"_blank",rel:"noopener noreferrer"};function h(v,k){const e=i("ExternalLinkIcon");return t(),l("div",null,[p,d,u,a("p",null,[a("a",m,[o("https://www.manishbangia.com/initiate-sccm-client-actions-cmd-line/"),c(e)])])])}const _=s(r,[["render",h],["__file","win_sccm_troubleshooting_2.html.vue"]]);export{_ as default};
