import{_ as i,W as l,X as o,Z as e,$ as a,a0 as s,Y as r,G as n}from"./framework-b5535326.js";const d="/assets/post64_vmware_disk_files-0e8baf03.png",h="/assets/post64_vmware_disk_files_hidden_in_DS_Browser-6ec13719.png",c={},p=r('<h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言" aria-hidden="true">#</a> 前言</h2><p>了解VMWare的虚拟机磁盘的文件结构。</p><h2 id="正文" tabindex="-1"><a class="header-anchor" href="#正文" aria-hidden="true">#</a> 正文</h2><ul><li>VMDK文件</li><li>其他</li></ul><p><strong>ESX Shell下磁盘文件一览</strong></p><figure><img src="'+d+'" alt="磁盘文件结构 - ESX Shell" tabindex="0" loading="lazy"><figcaption>磁盘文件结构 - ESX Shell</figcaption></figure><p><strong>vSphere DataStore Browser下磁盘文件一览</strong><img src="'+h+'" alt="磁盘文件结构 - DataStore Browser" loading="lazy"></p><h3 id="vmdk文件" tabindex="-1"><a class="header-anchor" href="#vmdk文件" aria-hidden="true">#</a> VMDK文件</h3><ul><li>[vmname].VMDK</li></ul><p>VMDK文件是虚拟机磁盘描述符配置文件，不是实际数据存储磁盘文件。它记录的是磁盘大小、磁盘类型等元数据，是一个文本文件。</p><div class="hint-container note"><p class="hint-container-title">注</p><p>该文件通过Vsphere Web控制台下的DataStore Browser可以看到，而且看起来文件大小等同于虚拟机磁盘分配大小，但它不是实际的存储数据存储的虚拟机磁盘文件，而是下面的flat.vmdk文件。</p></div><ul><li>[vmname]-flat.vmdk</li></ul>',12),m={href:"https://www.ibm.com/support/pages/detailed-description-all-files-make-virtual-machine",target:"_blank",rel:"noopener noreferrer"},_=r('<blockquote><p>[vmname]-flat.vmdk file - This is the actual raw disk file that is created for each virtual hard drive. Almost all of a .vmdk file&#39;s content is the virtual machine&#39;s data, with a small portion allotted to virtual machine overhead. This file will be roughly the same size as your virtual hard drive.</p></blockquote><div class="hint-container note"><p class="hint-container-title">注</p><p>该文件通过Vsphere Web控制台下的DataStore Browser是看不到的，需要到ESX shell下才能看到。</p></div><ul><li>[vmname]-delta.vmdk</li></ul><p>一言蔽之就是“快照”，创建一个快照就会创建对应一个delta.vmdk磁盘文件。</p><p><code>delta</code>代表的是增长的数字序号，例如第一个快照就是vmname-0001.vmdk,第二个快照就是vmname-0002.vmdk，依次类推。</p><p>单个快照磁盘文件<strong>永远不会超过虚拟机磁盘base vmdk的大小</strong>，因为创建快照原理是是把需要修改的数据块从base vdmk中拷贝出来，然后修改生成的磁盘，不是拷贝整个base vmdk。</p>',6),f={href:"https://www.ibm.com/support/pages/detailed-description-all-files-make-virtual-machine",target:"_blank",rel:"noopener noreferrer"},u=e("blockquote",null,[e("p",null,[a("[vmname]delta.vmdk file - This is the differential file created when you take a snapshot of a VM (also known as REDO log). When you snapshot a VM it stops writing to the base vmdk and starts writing changes to the snapshot delta file. The snapshot delta will initially be small and then start growing as changes are made to the base vmdk file, The delta file is a bitmap of the changes to the base vmdk thus is can never grow larger than the base vmdk. A delta file will be created for each snapshot that you create for a VM. "),e("strong",null,"These files are automatically deleted when the snapshot is deleted or reverted in snapshot manager"),a(".")])],-1),v=e("h3",{id:"其他",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#其他","aria-hidden":"true"},"#"),a(" 其他")],-1),k=e("p",null,"待补充",-1),g=e("h2",{id:"参考",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#参考","aria-hidden":"true"},"#"),a(" 参考")],-1),b={href:"https://www.ibm.com/support/pages/detailed-description-all-files-make-virtual-machine",target:"_blank",rel:"noopener noreferrer"},w={href:"http://vmfsrecover.com/articles/vmfs-disk-types",target:"_blank",rel:"noopener noreferrer"};function S(V,x){const t=n("ExternalLinkIcon");return l(),o("div",null,[p,e("p",null,[a("数据实际所在的磁盘文件。引自"),e("a",m,[a("IBM Source"),s(t)]),a("：")]),_,e("p",null,[a("引自"),e("a",f,[a("IBM Source"),s(t)]),a("：")]),u,v,k,g,e("p",null,[e("a",b,[a("IBM Source"),s(t)])]),e("p",null,[e("a",w,[a("VMDK file types"),s(t)])])])}const y=i(c,[["render",S],["__file","post65_ops_vmware_01.html.vue"]]);export{y as default};
