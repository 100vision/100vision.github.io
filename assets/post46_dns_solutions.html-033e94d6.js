import{_ as s,W as l,X as c,Z as e,$ as o,a0 as r,a1 as i,Y as t,G as a}from"./framework-b5535326.js";const h={},p=e("h2",{id:"前言",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#前言","aria-hidden":"true"},"#"),o(" 前言")],-1),u=e("p",null,"国内环境下，除了不能直连海外服务器问题外，还有DNS污染问题让人恼火，因此需要了解一下怎么解决。 可以吐槽一下，在本朝很多东西都是zz的延申。",-1),D=e("h2",{id:"什么是dns污染",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#什么是dns污染","aria-hidden":"true"},"#"),o(" 什么是DNS污染")],-1),_={href:"https://zh.wikipedia.org/zh-cn/%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%93%E5%AD%98%E6%B1%A1%E6%9F%93",target:"_blank",rel:"noopener noreferrer"},f=t('<h2 id="怎么解决" tabindex="-1"><a class="header-anchor" href="#怎么解决" aria-hidden="true">#</a> 怎么解决</h2><blockquote><p>实现原理：</p></blockquote><p>普通DNS流量因为都是明文，没有加密才会被导致篡改，给DNS流量加密，套一层解决。加密方法主要有这么几种。</p><ul><li>DOH (DNS Over HTTPS)</li><li>DOT (DNS Over TLS)</li><li>DNS Encrypt</li></ul><blockquote><p>具体方法是：</p></blockquote><ul><li>在本地部署一台DNS缓存服务器，和上游DNS服务器通讯加密。实现方法可以是DOH或是DNS Encrypt</li><li>本地其他主机的DNS服务器指向到本地DNS缓存服务器。</li></ul><h2 id="方案选项1-使用doh部署本地dns缓存服务器" tabindex="-1"><a class="header-anchor" href="#方案选项1-使用doh部署本地dns缓存服务器" aria-hidden="true">#</a> 方案选项1：使用DOH部署本地DNS缓存服务器</h2><h3 id="选择doh服务器作为上游dns服务器" tabindex="-1"><a class="header-anchor" href="#选择doh服务器作为上游dns服务器" aria-hidden="true">#</a> 选择DOH服务器作为上游DNS服务器</h3><p>当前使用比较多的是DOH，比较著名的支持DOH的公网DNS服务器有：</p><ul><li>Cloudflare的<code>1.1.1.1</code></li><li>Google的 <code>8.8.8.8</code></li></ul>',10),N={href:"https://github.com/dnscrypt/dnscrypt-resolvers",target:"_blank",rel:"noopener noreferrer"},S=t('<h3 id="部署本地dns缓存服务器" tabindex="-1"><a class="header-anchor" href="#部署本地dns缓存服务器" aria-hidden="true">#</a> 部署本地DNS缓存服务器</h3><blockquote><p>本地DNS缓存服务器，它扮演DOH客户端，负责转发本地的DNS查询给外部的DOH服务器，需要本地部署。</p></blockquote><blockquote><p>可以使用支持DOH的客户端软件部署本地DNS缓存服务器。比较著名支持DOH的DNS客户端软件有：</p></blockquote><ul><li><code>dnsmasq</code></li><li><code>dnscrypt-proxy</code></li></ul><h3 id="使用dnsmasq-和-cloudflare-1-1-1-1" tabindex="-1"><a class="header-anchor" href="#使用dnsmasq-和-cloudflare-1-1-1-1" aria-hidden="true">#</a> 使用DNSMASQ 和 Cloudflare 1.1.1.1</h3><p>搭建步骤可以参考：</p>',6),m={href:"https://page.codespaper.com/2019/dnsmasq-cloudflare-doh/",target:"_blank",rel:"noopener noreferrer"},b=t('<h3 id="使用本地缓存服务器dnsmasq" tabindex="-1"><a class="header-anchor" href="#使用本地缓存服务器dnsmasq" aria-hidden="true">#</a> 使用本地缓存服务器dnsmasq</h3><ul><li>如果是dnsmasq和本机一台主机使用，可以修改<code>/etc/resolv.conf</code>。删除所有<code>nameserver</code>，添加一行<code>nameserver 127.0.0.1</code> 即可。</li><li>如果是供内网所有主机使用，修改内网主机的DNS服务器指向到dnsmasq。</li></ul><h2 id="方案选项2-使用dns-encrypt" tabindex="-1"><a class="header-anchor" href="#方案选项2-使用dns-encrypt" aria-hidden="true">#</a> 方案选项2：使用DNS Encrypt</h2>',3),k={href:"https://github.com/DNSCrypt/dnscrypt-proxy",target:"_blank",rel:"noopener noreferrer"};function q(E,x){const n=a("ExternalLinkIcon"),d=a("RouterLink");return l(),c("div",null,[p,u,D,e("blockquote",null,[e("p",null,[o("又称DNS“投毒”,执行DNS劫持攻击导致下游DNS服务器缓存了错误记录的现象。详见"),e("a",_,[o("wiki"),r(n)])])]),f,e("blockquote",null,[e("p",null,[o("更多可以查询这里 "),e("a",N,[o("https://github.com/dnscrypt/dnscrypt-resolvers"),r(n)])])]),S,e("ul",null,[e("li",null,[o("[dnsmasq + Cloudflare DoH 自建 DNS ] ("),e("a",m,[o("https://page.codespaper.com/2019/dnsmasq-cloudflare-doh/"),r(n)]),o(" )")]),e("li",null,[r(d,{to:"/zh/%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF/%E7%BD%91%E7%BB%9C/shttps:/developers.cloudflare.com/1.1.1.1/encryption/dns-over-https/dns-over-https-client/"},{default:i(()=>[o("Connect to 1.1.1.1 using DoH client")]),_:1})])]),b,e("p",null,[o("可以参考 "),e("a",k,[o("https://github.com/DNSCrypt/dnscrypt-proxy"),r(n)])])])}const g=s(h,[["render",q],["__file","post46_dns_solutions.html.vue"]]);export{g as default};
