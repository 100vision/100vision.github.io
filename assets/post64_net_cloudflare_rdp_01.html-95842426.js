import{_ as r,W as l,X as s,Z as e,$ as o,a0 as t,Y as a,G as d}from"./framework-b5535326.js";const c={},i=e("h2",{id:"前言",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#前言","aria-hidden":"true"},"#"),o(" 前言")],-1),h={href:"https://blog.solex-inc.com/zh/%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF/%E7%BD%91%E7%BB%9C/reverse_proxyies.html",target:"_blank",rel:"noopener noreferrer"},p=e("p",null,"使用Cloudflare Tunnel穿透普通的Web服务比较简单，一些特殊的应用需要特别设置，比如Microsoft Remote Desktop,因此在这里记录一下。",-1),u=e("h2",{id:"正文",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#正文","aria-hidden":"true"},"#"),o(" 正文")],-1),_=e("p",null,"使用Cloudflare Tunnel可以穿透Windows远程桌面，实现RDP到家里的Windows机器。",-1),f=e("h3",{id:"穿透microsoft-remote-desktop",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#穿透microsoft-remote-desktop","aria-hidden":"true"},"#"),o(" 穿透Microsoft Remote Desktop")],-1),m={href:"https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/get-started/create-remote-tunnel/",target:"_blank",rel:"noopener noreferrer"},w=e("code",null,"public hostname",-1),x={href:"http://rdp.example.com",target:"_blank",rel:"noopener noreferrer"},b=e("li",null,[o("选择"),e("code",null,"RDP"),o("协议，并指定内网的目标Windows主机，例如：rdp://192.168.8.8。这样Cloudflared将会把流量转发到192.168.8.8；")],-1),k={href:"https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/downloads/",target:"_blank",rel:"noopener noreferrer"},v=a(`<div class="hint-container note"><p class="hint-container-title">注</p><p>如果有多个rdp客户端，也可以把cloudflared部署一台公共机器上，这个cloudflared仅仅只要保持运行即可，不需要配置</p></div><ul><li>在rdp客户端（发起方）执行以下命令启动cloudflared.</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>cloudflared access rdp --hostname rdp.example.com --url rdp://localhost:33890
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,3),g={href:"http://rdp.example.com",target:"_blank",rel:"noopener noreferrer"},E={class:"hint-container note"},C=e("p",{class:"hint-container-title"},"注",-1),D=e("code",null,"winsw",-1),B={href:"https://github.com/winsw/winsw",target:"_blank",rel:"noopener noreferrer"},R=e("ul",null,[e("li",null,"开始发起RDP远程桌面。")],-1),W=e("p",null,[o("启动 "),e("code",null,"Microsoft Remote Desktop"),o(",远程主机填入 "),e("code",null,"localhost:33890")],-1),T=e("h2",{id:"参考",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#参考","aria-hidden":"true"},"#"),o(" 参考")],-1),A={href:"https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/use-cases/rdp/",target:"_blank",rel:"noopener noreferrer"};function N(P,V){const n=d("ExternalLinkIcon");return l(),s("div",null,[i,e("p",null,[o("前面 "),e("a",h,[o("这里"),t(n)]),o(" 有了解了几种内网穿透（俗称“打洞”）的方式，使用体验下来，感觉Cloudflare Tunnel最好用，一是部署起来很简单，二是使用体验有很好，速度快。")]),p,u,_,f,e("ul",null,[e("li",null,[o("参照 "),e("a",m,[o("官方教程：Set up a tunnel through the dashboard"),t(n)]),o("部署好一个Tunnel到内网一台机器上；")]),e("li",null,[o("添加一个"),w,o(",例如 "),e("a",x,[o("rdp.example.com"),t(n)]),o("。我们将使用这个主机名rdp远程到家里Windows.")]),b,e("li",null,[o("在远程主机上（rdp发起方）也安装Cloudflared "),e("a",k,[o("这里下载"),t(n)])])]),v,e("p",null,[e("a",g,[o("rdp.example.com"),t(n)]),o(" #是目标rdp服务器主机（可能是你家的windows） localhost #cloudflared运行所在的机器")]),e("div",E,[C,e("p",null,[o("以上命令要长期保持运行，不能关闭，否则RDP连接将会中断。为了不中断，如果是Windows平台，可以使用"),D,o("等工具做成服务或是让它开机启动。参考："),e("a",B,[o("https://github.com/winsw/winsw"),t(n)])])]),R,W,T,e("p",null,[e("a",A,[o("https://developers.cloudflare.com/cloudflare-one/connections/connect-networks/use-cases/rdp/"),t(n)])])])}const M=r(c,[["render",N],["__file","post64_net_cloudflare_rdp_01.html.vue"]]);export{M as default};
