import{_ as e,W as s,X as i,Y as o}from"./framework-b5535326.js";const t={},n=o('<h2 id="å‰è¨€" tabindex="-1"><a class="header-anchor" href="#å‰è¨€" aria-hidden="true">#</a> å‰è¨€</h2><p>SSHè¿œç¨‹ä¼šè¯æ–­å¼€,ä¼šè¯ä¸‹çš„æ­£åœ¨æ‰§è¡Œçš„å­è¿›ç¨‹éƒ½ä¼šå¼ºè¡Œé€€å‡ºä¸å†è¿è¡Œï¼Œè¿™æ˜¯å› ä¸ºç³»ç»Ÿä¼šå‘å®ƒä»¬æ•´ä¸ªè¿›ç¨‹ç»„ï¼ˆä¼šè¯çˆ¶è¿›ç¨‹sshdå’Œä¼šè¯å­è¿›ç¨‹ï¼‰å‘é€<code>SIGHUP</code>ä¿¡å·(Signal Hang UP) ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿›ç¨‹ç»„æ”¶åˆ°åå†å›å“åº”ï¼ˆå³é€€å‡º).</p><p>è¦ä¿æŒSSHä¼šè¯é‡Œçš„è¿›ç¨‹ç»§ç»­è¿è¡Œï¼Œæœ‰å¤šä¸ªé€‰é¡¹ï¼š</p><ul><li>ä½¿ç”¨ <code>nohup</code>ï¼Œå¯¹ç³»ç»Ÿçš„<code>SIGHUP</code>ä¿¡å·ä¸ç†ä¼šï¼Œè¿™æ ·è¿›ç¨‹ä»èƒ½æ‰§è¡Œã€‚</li><li>ä½¿ç”¨ <code>screen</code>ï¼ŒæŠŠè¿›ç¨‹åˆ†ç¦»ï¼ˆæŒ‚èµ·ï¼‰ï¼Œä»å¯ä»¥å†åå°è¿›è¡Œã€‚</li></ul><h2 id="æ­£æ–‡" tabindex="-1"><a class="header-anchor" href="#æ­£æ–‡" aria-hidden="true">#</a> æ­£æ–‡</h2><p>æœ¬æ–‡ä¸»è¦ä»‹ç» <code>Screen</code>,å¤šçª—å£ä¼šè¯ç®¡ç†ã€‚SSHè¿œç¨‹ä¼šè¯æ–­å¼€è¿›ç¨‹ä»å¯è¿è¡Œã€‚</p><h3 id="åŸç†" tabindex="-1"><a class="header-anchor" href="#åŸç†" aria-hidden="true">#</a> åŸç†</h3><p>screené€šè¿‡æ”¹å˜sshä¼šè¯çš„å­è¿›ç¨‹ï¼ˆä½ çš„ä»»åŠ¡è¿›ç¨‹ï¼‰çš„çˆ¶è¿›ç¨‹ï¼Œâ€œç½‘å‹è¯­ï¼šé‡æ–°æ‰¾ä¸ªçˆ¹â€ ğŸ˜ƒã€‚å…·ä½“å¦‚ä¸‹ï¼š</p><ul><li>å½“å¼€å¯ä¸€ä¸ªSSHè¿œç¨‹ä¼šè¯æ—¶ï¼Œå¦‚æœç›´æ¥åœ¨SSHä¼šè¯é‡Œæ‰§è¡Œå¯åŠ¨ç¨‹åºï¼Œåˆ™ç¨‹åºçš„çˆ¶è¿›ç¨‹æ˜¯sshdã€‚</li><li>å½“å¼€å¯ä¸€ä¸ªScreenä¼šè¯ï¼Œä½ çš„ç¨‹åºè¿è¡Œåœ¨Screenä¼šè¯é‡Œï¼Œä½ ç¨‹åºçš„çˆ¶è¿›ç¨‹å°±ä¸æ˜¯sshdäº†ï¼ˆä¸åœ¨sshdè¿›ç¨‹ç»„é‡Œï¼‰ï¼Œè€Œæ˜¯screenã€‚</li></ul><p>è¿™æ ·SSHä¼šè¯é€€å‡ºé€ æˆsshdè¿›ç¨‹é€€å‡ºï¼Œä¹Ÿä¸å½±å“ä½ çš„ç¨‹åºç»§ç»­è¿è¡Œã€‚</p><div class="hint-container tip"><p class="hint-container-title">æç¤º</p><p>ä½¿ç”¨<code>pstree</code>å¯ä»¥è§‚å¯Ÿåˆ°è¿›ç¨‹ç»„å…³ç³»ã€‚</p></div><h3 id="ä½¿ç”¨ä¸¾ä¾‹" tabindex="-1"><a class="header-anchor" href="#ä½¿ç”¨ä¸¾ä¾‹" aria-hidden="true">#</a> ä½¿ç”¨ä¸¾ä¾‹</h3><ul><li><p>åˆ›å»ºä¸€ä¸ªScreenä¼šè¯å¹¶å‘½åjavaã€‚ <code>screen -S java</code></p></li><li><p>åœ¨ä¼šè¯ä¸‹ï¼Œå¯åŠ¨åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ªScreen Windows,å¹¶å‘½åä¸º java_job1, <code>screen -t &quot;java_job1&quot;</code></p></li><li><p>æ‰§è¡Œæƒ³è¦çš„ä»»åŠ¡, <code>/my-scripts_or_my_commands.py</code></p></li><li><p>æƒ³æš‚æ—¶é€€å‡ºï¼ŒæŒ‚èµ·ä¼šè¯detach,Â·<code>CTRL + a + d</code></p></li><li><p>å›é€€åˆ°æ­£å¸¸Shelläº†</p></li><li><p>çœ‹ä¸€ä¸‹æ‰€æœ‰Screenä¼šè¯ <code>screen -ls</code>ã€‚</p></li><li><p>å¦‚æœæƒ³åˆ›å»ºä¸€ä¸ªScreenä¼šè¯ä¹Ÿå¯ä»¥ï¼Œé‡å¤å‰é¢çš„<code>screen -S &lt;session_name</code>ï¼›è¿™æ—¶æ–­å¼€SSHä¹Ÿå¯ä»¥ï¼ŒScreenä¼šè¯æ‰§è¡Œçš„ä»åœ¨æ‰§è¡Œã€‚</p></li><li><p>è¿ä¸ŠSSH, æ¢å¤åˆ°é‚£ä¸ªæŒ‚èµ·ï¼ˆåˆ†ç¦»ï¼‰çš„Screenä¼šè¯ï¼Œ<code>screen -r java</code></p></li></ul><h2 id="å‚è€ƒ" tabindex="-1"><a class="header-anchor" href="#å‚è€ƒ" aria-hidden="true">#</a> å‚è€ƒ</h2><p>æ¥è‡ªGoogle Gemini</p><blockquote><p>When you start a child process in a Screen session, the child process is not directly associated with the SSH session. Instead, the child process is associated with the Screen session itself. This means that the child process will continue to run even if the SSH session is exited.</p></blockquote><blockquote><p>Here is a simplified overview of how child processes survive the exited SSH session:</p></blockquote><blockquote><ol><li>When you start a Screen session, Screen creates a new session leader process. This process is responsible for managing the Screen session and all of the child processes that are started within the session.</li><li>When you start a child process in a Screen window, the child process is forked from the session leader process. This means that the child process inherits the session leader&#39;s process ID (PID) and session ID (SID).</li><li>When you exit the SSH session, the SSH client process is terminated. However, the Screen session leader process and all of the child processes that are running within the session are not affected. This is because these processes are not directly associated with the SSH session.</li><li>You can continue to interact with the Screen session and the child processes by reattaching to the Screen session. To do this, you can use the <code>screen -r</code> command.</li></ol></blockquote><blockquote><p>Here are some additional details about how child processes survive the exited SSH session:</p><ul><li>The child processes are not affected by the termination of the SSH session because they are not running under the SSH session&#39;s process group.</li><li>The child processes are able to continue running because they are attached to the Screen session leader process, which is not terminated when the SSH session is exited.</li><li>You can use the <code>screen -ls</code> command to list all active Screen sessions. This can be useful for identifying the Screen session that you want to reattach to.</li></ul></blockquote><blockquote><p>By understanding how child processes survive the exited SSH session, you can use Screen to run long-running processes and tasks without having to worry about them being terminated if the SSH session is interrupted.</p></blockquote>',20),c=[n];function a(r,h){return s(),i("div",null,c)}const l=e(t,[["render",a],["__file","post85_inux_basis_tools_screen_howto.html.vue"]]);export{l as default};
