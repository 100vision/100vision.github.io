import{_ as l,W as t,X as a,Z as i,$ as o,a0 as r,Y as e,G as s}from"./framework-2e6688e7.js";const h={},d=e('<h1 id="microsoft-fslogix" tabindex="-1"><a class="header-anchor" href="#microsoft-fslogix" aria-hidden="true">#</a> Microsoft FSLogix</h1><div class="hint-container tip"><p class="hint-container-title">前提条件</p><p>待添加</p></div><h2 id="_1、什么是fslogix" tabindex="-1"><a class="header-anchor" href="#_1、什么是fslogix" aria-hidden="true">#</a> 1、什么是FSLogix</h2><p>FSLogix是微软免费的Windows用户配置管理解决方案。把用户账户配置从系统里抽象剥离出来，然后使用vhd或vhdx虚拟磁盘文件进行封装，放到一个网络位置，例如SMB共享。用户登录时，系统（具体时FSLogix Agent)会去挂载用户的vhd/vhdx磁盘文件到本地。这样实现了：</p><ul><li>用户配置文件统一管理</li></ul><p>用户配置文件都封装重定向到一个网络位置</p><ul><li>提供了用户体验</li></ul><p>用户配置往往包含一些用户专用应用数据。例如桌面、Chrome收藏夹等。没有配置管理的话，用户配置不会跟着走，如果用户登录多台服务器就会有不同的配置。通过FSLogix可以实现配置跟着走,对用户体验提高很多。</p>',8),c={class:"hint-container tip"},p=i("p",{class:"hint-container-title"},"相比Windows漫游配置文件",-1),x={href:"https://learn.microsoft.com/en-us/fslogix/overview-what-is-fslogix%E3%80%82",target:"_blank",rel:"noopener noreferrer"},_=e('<h2 id="_2-fslogix应用范围" tabindex="-1"><a class="header-anchor" href="#_2-fslogix应用范围" aria-hidden="true">#</a> 2. FSLogix应用范围</h2><p>可以应用到：</p><ul><li>Horizon View 虚拟桌面交付VDA的Instant Cloned自动场部署中;</li><li>Microsoft RDSH (Remote Destkop Server Host)中；</li><li>Citrix桌面交付；</li></ul><h2 id="_3-如何部署" tabindex="-1"><a class="header-anchor" href="#_3-如何部署" aria-hidden="true">#</a> 3. 如何部署</h2><div class="hint-container warning"><p class="hint-container-title">环境要求</p><p>1、需要AD域环境。2、存储要求。如果用户较多使用的是网络存储，最好是有10GB网络和较快的存储，否则用户登录会很慢，通过网络挂载VHDX等。</p></div><h3 id="_3-1-部署到horizon-view自动场-虚拟桌面或rdsh服务器" tabindex="-1"><a class="header-anchor" href="#_3-1-部署到horizon-view自动场-虚拟桌面或rdsh服务器" aria-hidden="true">#</a> 3.1 部署到Horizon View自动场:虚拟桌面或RDSH服务器</h3>',6),f={href:"https://learn.microsoft.com/en-us/fslogix/how-to-configure-storage-permissions#configure-windows-acls",target:"_blank",rel:"noopener noreferrer"},g=e("<li><p>准备自动场的模板虚拟机（安装系统，安装VMWare Tools, 配置DHCP等）</p></li><li><p>在虚拟桌面模板中安装Horizon Agent (安装组件需要选择&quot;Horizon Instant Clone&quot;)，这时不需要注册到Horizon连接服务器；</p></li><li><p>在虚拟桌面模板镜像中(Horizon Agent) 安装FSLogix Agent代理（目前是v2.9）</p></li><li><p>创建快照；</p></li><li><p>准备和配置FSLogix组策略。把FSLogix Bundle安装zip包的组策略文件<code>fslogx.adml</code>和<code>fslogix.admx</code>放到域控的<code>SYSVOL/PolicyDefinitions</code>对应文件夹中。</p></li><li><p>创建1条组策略并链接到Horizon VDA桌面，编辑配置FSLogix组策略。管理模板找到fslogix文件夹，主要配置项有：</p></li>",6),u=e('<ul><li>启用fslogix</li><li>指定配置文件类型为 <strong>VHDX</strong></li><li>配置VHD文件夹位置：指定步骤1准备好的网络共享；</li><li>启用【删除本地配置文件如果成功】；</li><li>指定配置文件大小的上限，默认是30GB；</li></ul><ol start="7"><li>创建Horizon Instant Cloned自动场；</li><li>如果最好部署成功，用户登录后，会在网络共享中创建一个VHDX磁盘文件；</li></ol><h3 id="_3-2-部署到horizon-view的手动场-rdsh服务器" tabindex="-1"><a class="header-anchor" href="#_3-2-部署到horizon-view的手动场-rdsh服务器" aria-hidden="true">#</a> 3.2 部署到Horizon View的手动场：RDSH服务器</h3><p>步骤大致同上。不同的、需要注意的是准备RDSH主机模板:</p><ul><li>准备RDSH主机模板时，安装FSLogix Agent；</li><li>准备RDSH主机模板时，<strong>不安装</strong>Horizon Agent；</li><li>需要手动克隆RDSH主机，并使用SysPrep封装每一台RDSH或使用vSphere定制操作系统；</li><li>配置主机名/静态IP地址；</li><li>需要手动安装Horizon Agent，不选择Horizon Instant Clone和Composer。这时，需要输入Horizon连接服务器注册；</li><li>创建Horizon手动场并添加所有RDSH主机；</li></ul><h3 id="_3-3-部署到citrix" tabindex="-1"><a class="header-anchor" href="#_3-3-部署到citrix" aria-hidden="true">#</a> 3.3 部署到Citrix</h3><p>未做（还有环境测试）</p><h1 id="应用交付-horizon-app-volumes" tabindex="-1"><a class="header-anchor" href="#应用交付-horizon-app-volumes" aria-hidden="true">#</a> 应用交付 Horizon App Volumes</h1>',8);function H(S,m){const n=s("ExternalLinkIcon");return t(),a("div",null,[d,i("div",c,[p,i("p",null,[o("虽然有点类似用户配置文件漫游,但比Windows漫游配置文件更强，详见官方 "),i("a",x,[o("https://learn.microsoft.com/en-us/fslogix/overview-what-is-fslogix。"),r(n)])])]),_,i("ol",null,[i("li",null,[i("p",null,[o("准备一个网络共享。并设置FSLogix Container的共享和权限。用来放置用户配置VHD/VHDX；权限设置参考："),i("a",f,[o("Configure Windows ACL"),r(n)])])]),g]),u])}const z=l(h,[["render",H],["__file","vmware_horizon_01.html.vue"]]);export{z as default};
